# iVnc Configuration Example
# Copy this file to config.toml and customize as needed

[server]
# Run in foreground (true) or daemonize (false)
foreground = true
# PID file path
pidfile = "/var/run/ivnc.pid"

[display]
# Display width
width = 1920
# Display height
height = 1080
# Refresh rate in Hz
refresh_rate = 60

[http]
# HTTP server bind address
host = "0.0.0.0"
# HTTP server port (serves HTTP, WebSocket signaling, and ICE-TCP on the same port)
port = 8000
# Enable HTTP basic authentication
basic_auth_enabled = true
# Basic auth username
basic_auth_user = "user"
# Basic auth password
basic_auth_password = "mypasswd"

[encoding]
# Target frames per second
target_fps = 30
# Maximum frames per second
max_fps = 60

[input]
# Enable keyboard input
enable_keyboard = true
# Enable mouse input
enable_mouse = true
# Enable clipboard sync
enable_clipboard = true
# Enable binary clipboard sync
enable_binary_clipboard = false
# Enable command execution from client messages
enable_commands = false
# Allowed file transfer directions (use [] or ["download"] to disable uploads)
file_transfers = ["upload", "download"]
# Directory to store uploaded files
upload_dir = "~/Desktop"
# Mouse sensitivity multiplier
mouse_sensitivity = 1.0

[audio]
# Enable audio streaming
enabled = true
# Audio sample rate (Hz)
sample_rate = 48000
# Number of audio channels (1 = mono, 2 = stereo)
channels = 2
# Audio bitrate (bits per second)
bitrate = 128000

[logging]
# Log level: "trace", "debug", "info", "warn", "error"
level = "info"
# Optional log file path (comment out for stdout only)
# logfile = "/var/log/ivnc.log"
# Log format: "json" or "text"
format = "json"

# ============================================================================
# WebRTC Configuration
#
# iVnc uses str0m ICE-lite with TCP transport. All WebRTC traffic (signaling,
# media, data channels) flows through the same HTTP port via protocol splitting.
# No STUN/TURN servers are required for typical deployments.
# ============================================================================

[webrtc]
# Enable WebRTC streaming
enabled = true

# Video codec: "h264", "vp8", "vp9", "av1"
video_codec = "h264"

# Target video bitrate in kbps
video_bitrate = 8000

# Hardware encoder: "auto", "software", "vaapi", "nvenc", "qsv"
hardware_encoder = "auto"

# GStreamer pipeline latency in milliseconds
pipeline_latency_ms = 50

# Keyframe interval in frames (lower = more keyframes = better error recovery)
keyframe_interval = 60

# Optional STUN/TURN servers for browser ICE candidates (usually not needed
# with ICE-TCP, but can be configured as fallback for restrictive networks)
# stun_host = "stun.l.google.com"
# stun_port = 19302
# turn_host = ""
# turn_port = 3478
# turn_protocol = "udp"
# turn_tls = false
# turn_username = ""
# turn_password = ""
